#summary Android app version checking service for Android Market.

<wiki:gadget url="http://android-query.googlecode.com/svn/trunk/demo/gadget/social.xml?v=2" height="115" width="700" border="0" /> 

==In-App Version Checking==

When a new app version is released, developers often want to notify existing users that an update is available. However, there's no market API to query the version and update information for Android. 

A simple solution is to setup a web service for an app, and update the content when an app is uploaded to the market place.

==AQuery Market API==

AQuery offers a simple web service for any Android app to check against their version info and prompt the user with recent changes and allow user to update if they prefer. The service is free and is packaged with the core AQuery lib.

===Code===

Invoking a service is simple. Add these 3 lines in your launching activity.

{{{

@Override
public void onCreate(Bundle savedInstanceState) {
	
	super.onCreate(savedInstanceState);
	
	if(isTaskRoot()){			
		MarketService ms = new MarketService(this);
		ms.level(MarketService.MINOR).checkVersion();
	}
	
}
}}}

===Recent Changes===

The recent changes information is fetched directly from the app's main page on the Android market.

Make sure to fill in the "Recent Changes" box when an app is published. The AQuery api will do the rest.


===Granularity===

AQuery provide 3 levels of granularity for promoting the user for updates. 

{{{
ms.level(MarketService.MINOR)
}}}

For example, when a new feature or a bug fix is released, we might want to prompt the user for update. However, if the release only contains a minor bug fix or optimization, we might not want to interrupt the users.

For this feature to work, the version number of the app must be in the following format:

MAJOR.MINOR.REVISION

For example, the user app version:
3.11.4

Latest version:
3.11.6

A prompt level of MINOR will not prompt the user, because the minor version code (11) is equals or higher.

A prompt level of REVISION will triggers a prompt, because the revision code (4) is lower than the latest's (6).